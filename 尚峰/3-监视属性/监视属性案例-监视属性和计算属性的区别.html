<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>监视属性案例-监视属性和计算属性的区别</title>
    <script src="../vue.js"></script>
  </head>

  <!-- computed和watch之间的区别
            1 computed能完成的功能，watch都可以完成
            2 watch能完成的功能，computed不一定能完成，例如：watch可以进行异步操作，即延迟操作
        
        两个重要的小原则
                1 所有被vue管理的函数，最好都用普通函数，这样this的指向才是vm 或组件实例对象
                2 所有不被vue管理的函数(定时器的回调函数，ajax的回调函数等，Promise的回调函数)，都最好写成箭头函数，
                这样this的指向才是vm 或组件实例对象
            -->

  <body>
    <div id="root">
      姓：<input type="text" v-model:value="firstName" /><br /><br />
      名：<input type="text" v-model:value="lastName" /><br /><br />
      全名：<span>{{fullName}}</span><br /><br />
    </div>
  </body>
  <script>
    Vue.config.productionTip = false; //阻止vue在启动时生成生产提示

    // 计算属性的操作
    /* new Vue({
      el: "#root",
      data: {
        firstName: "张",
        lastName: "三",
      },

      //计算属性
      computed: {
        fullName() {
          return this.firstName + "-" + this.lastName;
        },
      },

      //   监视属性
      watch: {
        
      },
    }); */

    // 监视属性的操作
    new Vue({
      el: "#root",
      data: {
        firstName: "张",
        lastName: "三",
        fullName: "张-三",
      },

      /* //计算属性
      computed: {
      }, */

      //   监视属性
      watch: {
        //监视姓的变化并赋值给全名    正常写法
        firstName: {
          // immediate: true,   配置初始化时立即调用一次
          // deep: true,   配置深度监视
          handler(newvalue, oldvalue) {
            // 监视姓的变化并赋值给全名
            this.fullName = newvalue + "-" + this.lastName;
          },
        },
        /* //监视名的变化并赋值给全名    简写写法
        lastName(newvalue, oldvalue) {
          this.fullName = this.firstName + "-" + newvalue;
        }, */

        // 监视操作时的延迟执行
        lastName(newvalue, oldvalue) {
          setTimeout(() => {
            this.fullName = this.firstName + "-" + newvalue;
          }, 1000);
        },
      },
    });
  </script>
</html>
